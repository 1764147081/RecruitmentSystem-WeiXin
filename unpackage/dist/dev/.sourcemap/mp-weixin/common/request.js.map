{"version":3,"file":"request.js","sources":["common/request.js"],"sourcesContent":["\r\nexport const baseUrl = \"https://i.sdu.edu.cn/XSZX/NXXT/api\";\r\n\r\nexport function request(params = {}){\r\n\tlet {\r\n\t\turl,\r\n\t\tmethod,\r\n\t\tdata = {},\r\n\t\tdataType,\r\n\t\theader,\r\n\t} = params;\r\n\r\n\turl = baseUrl + url;\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t// 设置默认请求头\r\n\t\theader = header || {\r\n\t\t\t'content-type': 'application/x-www-form-urlencoded'\r\n\t\t};\r\n\r\n\t\tuni.request({\r\n\t\t\turl,\r\n\t\t\tdata,\r\n\t\t\tmethod,\r\n\t\t\theader,\r\n\t\t\tdataType,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t// 确保返回的数据格式一致\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tresolve(res.data || {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tcode: res.statusCode,\r\n\t\t\t\t\t\tmessage: 'Request failed with status code ' + res.statusCode,\r\n\t\t\t\t\t\tdata: res.data\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (error) => {\r\n\t\t\t\tconsole.error('Request failed:', error);\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tcode: -1,\r\n\t\t\t\t\tmessage: 'Network error: ' + (error.message || 'Unknown error'),\r\n\t\t\t\t\tdata: null\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n"],"names":["uni"],"mappings":";;AACY,MAAC,UAAU;AAEhB,SAAS,QAAQ,SAAS,IAAG;AACnC,MAAI;AAAA,IACH;AAAA,IACA;AAAA,IACA,OAAO,CAAE;AAAA,IACT;AAAA,IACA;AAAA,EACA,IAAG;AAEJ,QAAM,UAAU;AAEhB,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEvC,aAAS,UAAU;AAAA,MAClB,gBAAgB;AAAA,IACnB;AAEEA,kBAAAA,MAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,CAAC,QAAQ;AACjBA,sBAAA,MAAA,MAAA,OAAA,2BAAY,IAAI,IAAI;AAEpB,YAAI,IAAI,eAAe,KAAK;AAC3B,kBAAQ,IAAI,QAAQ,CAAA,CAAE;AAAA,QAC3B,OAAW;AACN,kBAAQ;AAAA,YACP,MAAM,IAAI;AAAA,YACV,SAAS,qCAAqC,IAAI;AAAA,YAClD,MAAM,IAAI;AAAA,UAChB,CAAM;AAAA,QACD;AAAA,MACD;AAAA,MACD,MAAM,CAAC,UAAU;AAChBA,sBAAA,MAAA,MAAA,SAAA,2BAAc,mBAAmB,KAAK;AACtC,gBAAQ;AAAA,UACP,MAAM;AAAA,UACN,SAAS,qBAAqB,MAAM,WAAW;AAAA,UAC/C,MAAM;AAAA,QACX,CAAK;AAAA,MACD;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;;"}
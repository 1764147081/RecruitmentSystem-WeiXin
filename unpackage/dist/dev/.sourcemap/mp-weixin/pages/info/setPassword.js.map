{"version":3,"file":"setPassword.js","sources":["pages/info/setPassword.vue","E:/000Work/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5mby9zZXRQYXNzd29yZC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"password-container\">\r\n\t\t<view class=\"page-title\">\r\n\t\t\t<text>设置密码</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-list\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">原密码</text>\r\n\t\t\t\t<input class=\"form-input\" v-model=\"oldPassword\" placeholder=\"请输入原密码,若没有设置则空置\" password=\"true\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">新密码</text>\r\n\t\t\t\t<input class=\"form-input\" v-model=\"newPassword\" placeholder=\"请输入新密码\" password=\"true\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">确认密码</text>\r\n\t\t\t\t<input class=\"form-input\" v-model=\"confirmPassword\" placeholder=\"请再次输入新密码\" password=\"true\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"confirm-btn\" @click=\"confirmSetPassword\">\r\n\t\t\t<text>确认修改</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tuseFirstStore\r\n\t} from '@/stores/index.js';\r\n\timport {\r\n\t\trequest\r\n\t} from '../../common/request';\r\n\tconst token = wx.getStorageSync('authToken');\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toldPassword: '',\r\n\t\t\t\tnewPassword: '',\r\n\t\t\t\tconfirmPassword: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tconfirmSetPassword() {\r\n\t\t\t\tif (!this.newPassword) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入新密码',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.newPassword.length < 6) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '密码长度不能少于6位',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.newPassword !== this.confirmPassword) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '两次输入的密码不一致',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.updatePassword()\r\n\t\t\t},\r\n\t\t\tasync updatePassword() {\r\n\t\t\t\tlet response;\r\n\t\t\t\tconsole.log(\"现在修改个人密码\");\r\n\t\t\t\tresponse = await request({\r\n\t\t\t\t\turl: \"/user/update/password\",\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t'Authorization': `Bearer ${token}`\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\toldPassword: this.oldPassword,\r\n\t\t\t\t\t\tnewPassword: this.newPassword\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '密码修改成功',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tif (response.code === 400) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: response.msg,\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\tduration: 2000,\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 密码验证通过，可以调用API修改密码\r\n\t\t\t// 这里模拟修改成功\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.password-container {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.page-title {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tpadding: 30rpx 0;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.form-list {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 30rpx 20rpx;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.form-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.form-label {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\twidth: 180rpx;\r\n\t}\r\n\r\n\t.form-input {\r\n\t\tflex: 1;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.confirm-btn {\r\n\t\tbackground-color: #007aff;\r\n\t\ttext-align: center;\r\n\t\tpadding: 30rpx 0;\r\n\t\tborder-radius: 16rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #fff;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/1764147081/Desktop/new/RecruitmentSystem-WeiXin/RecruitmentSystem-WeiXin/pages/info/setPassword.vue'\nwx.createPage(MiniProgramPage)"],"names":["wx","uni","request"],"mappings":";;;;AAkCC,MAAM,QAAQA,cAAE,KAAC,eAAe,WAAW;AAC3C,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,iBAAiB;AAAA,IAClB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,qBAAqB;AACpB,UAAI,CAAC,KAAK,aAAa;AACtBC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,KAAK,YAAY,SAAS,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,KAAK,gBAAgB,KAAK,iBAAiB;AAC9CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AACA,WAAK,eAAe;AAAA,IACpB;AAAA,IACD,MAAM,iBAAiB;AACtB,UAAI;AACJA,oBAAAA,MAAY,MAAA,OAAA,oCAAA,UAAU;AACtB,iBAAW,MAAMC,eAAAA,QAAQ;AAAA,QACxB,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,UACP,gBAAgB;AAAA,UAChB,iBAAiB,UAAU,KAAK;AAAA,QAChC;AAAA,QACD,MAAM;AAAA,UACL,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,QACnB;AAAA,MACD,CAAC;AACD,UAAI,SAAS,SAAS,KAAK;AAC1BD,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,SAAS,MAAM;AACd,uBAAW,MAAM;AAChBA,4BAAG,MAAC,aAAY;AAAA,YAChB,GAAE,GAAI;AAAA,UACR;AAAA,QACD,CAAC;AAAA;AAEF,UAAI,SAAS,SAAS,KAAK;AAC1BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,SAAS;AAAA,UAChB,MAAK;AAAA,UACL,UAAU;AAAA,QAEX,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA;AAAA,EAIF;AACD;;;;;;;;;;;;;;AC7GD,GAAG,WAAW,eAAe;"}
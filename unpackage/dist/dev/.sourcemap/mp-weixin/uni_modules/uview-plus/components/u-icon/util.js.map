{"version":3,"file":"util.js","sources":["uni_modules/uview-plus/components/u-icon/util.js"],"sourcesContent":["import config from '../../libs/config/config';\n// 定义高阶函数\nfunction once(fn) {\n    let called = false;\n    let result;\n\n    return function(...args) {\n        if (!called) {\n            result = fn.apply(this, args);\n            called = true;\n        }\n        return result;\n    };\n}\n\n// 使用高阶函数\nconst loadFont = once(() => {\n    // console.log('这个函数只能执行一次');\n    // #ifdef APP-NVUE\n    // nvue通过weex的dom模块引入字体，相关文档地址如下：\n    // https://weex.apache.org/zh/docs/modules/dom.html#addrule\n    const domModule = weex.requireModule('dom');\n    domModule.addRule('fontFace', {\n        'fontFamily': \"uicon-iconfont\",\n        'src': `url('${config.iconUrl}')`\n    });\n    if (config.customIcon.family) {\n        domModule.addRule('fontFace', {\n            'fontFamily': config.customIcon.family,\n            'src': `url('${config.customIcon.url}')`\n        });\n    }\n    // #endif\n    // #ifdef APP || H5 || MP-WEIXIN || MP-ALIPAY\n    uni.loadFontFace({\n        global: true, // 是否全局生效。微信小程序 '2.10.0'起支持全局生效，需在 app.vue 中调用。\n        family: 'uicon-iconfont',\n        source: 'url(\"' + config.iconUrl + '\")',\n        success() {\n            // console.log('内置字体图标加载成功');\n        },\n        fail() {\n            // console.error('内置字体图标加载出错');\n        }\n    });\n    if (config.customIcon.family) {\n        uni.loadFontFace({\n            global: true, // 是否全局生效。微信小程序 '2.10.0'起支持全局生效，需在 app.vue 中调用。\n            family: config.customIcon.family,\n            source: 'url(\"' + config.customIcon.url + '\")',\n            success() {\n                // console.log('扩展字体图标加载成功');\n            },\n            fail() {\n                // console.error('扩展字体图标加载出错');\n            }\n        });\n    }\n    // #endif\n    // #ifdef APP-NVUE\n    // if (this.customFontFamily) {\n    //     domModule.addRule('fontFace', {\n    //         'fontFamily': `${this.customPrefix}-${this.customFontFamily}`,\n    //         'src': `url('${this.customFontUrl}')`\n    //     })\n    // }\n    // #endif\n    return true;\n});\n\nlet fontUtil = {\n    loadFont\n}\n\nexport default fontUtil\n"],"names":["uni","config"],"mappings":";;;AAEA,SAAS,KAAK,IAAI;AACd,MAAI,SAAS;AACb,MAAI;AAEJ,SAAO,YAAY,MAAM;AACrB,QAAI,CAAC,QAAQ;AACT,eAAS,GAAG,MAAM,MAAM,IAAI;AAC5B,eAAS;AAAA,IACZ;AACD,WAAO;AAAA,EACf;AACA;AAGA,MAAM,WAAW,KAAK,MAAM;AAkBxBA,gBAAAA,MAAI,aAAa;AAAA,IACb,QAAQ;AAAA;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ,UAAUC,gDAAO,UAAU;AAAA,IACnC,UAAU;AAAA,IAET;AAAA,IACD,OAAO;AAAA,IAEN;AAAA,EACT,CAAK;AACD,MAAIA,yCAAM,OAAC,WAAW,QAAQ;AAC1BD,kBAAAA,MAAI,aAAa;AAAA,MACb,QAAQ;AAAA;AAAA,MACR,QAAQC,yCAAAA,OAAO,WAAW;AAAA,MAC1B,QAAQ,UAAUA,yCAAAA,OAAO,WAAW,MAAM;AAAA,MAC1C,UAAU;AAAA,MAET;AAAA,MACD,OAAO;AAAA,MAEN;AAAA,IACb,CAAS;AAAA,EACJ;AAUD,SAAO;AACX,CAAC;AAEE,IAAC,WAAW;AAAA,EACX;AACJ;;"}
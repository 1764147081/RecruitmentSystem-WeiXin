import{_ as e,r as a,o as t,a as n,c as i,e as s,w as o,p as l,D as r,q as u,G as c,x as d,H as f,i as p,d as m,f as v,k as h,m as _,g as k,B as w,F as y,C as g,t as C,z as b}from"./index-C2_1g6db.js";const q=e({setup(){const e=a([]),n=a([]);async function i(){const a=await l({url:"/answer/view/user",header:{"content-type":"application/json",Authorization:`Bearer ${r("authToken")}`}});e.value=[...a.data],await async function(){const a=e.value.map((async e=>({...await async function(e){return(await l({url:`/questionnaire/view?questionnaireId=${e}`,header:{"content-type":"application/json",Authorization:`Bearer ${r("authToken")}`}})).data}(e.questionnaireId),...e})));n.value=await Promise.all(a)}()}t((async()=>{document.querySelector(".uni-page-head-hd").style.display="none",await i()}));return{questionnaires:n,navigateToDepartment:()=>{c({url:"/pages/department/department"})},navigateToPaper:()=>{},navigateToInfo:()=>{c({url:"/pages/info/info"})},deleteQuestionnaire:e=>{n.value=n.value.filter((a=>a.id!==e)),l({url:`/answer/delete?finishId=${e}`,method:"POST",header:{"content-type":"application/json",Authorization:`Bearer ${r("authToken")}`}}).then((e=>{200===e.code&&d({title:"删除成功"})})).catch((e=>{d({title:"删除失败",icon:"none"})}))},viewQuestionnaire:e=>{u("QuestionnaireInfo",e),c({url:"/pages/paper/myQuestionnaire"})}}}},[["render",function(e,a,t,l,r,u){const c=n(i("u-navbar"),f),d=g,q=p,T=b;return m(),s(q,{class:"paper-container"},{default:o((()=>[v(c,{title:"已填报","left-icon":"arrow-left","bg-color":"#F8F8F8","title-color":"#000000",border:!1}),v(q,{class:"questionnaires-list"},{default:o((()=>[0===l.questionnaires.length?(m(),s(q,{key:0,class:"empty-tip"},{default:o((()=>[v(d,null,{default:o((()=>[h("暂无已填问卷")])),_:1})])),_:1})):_("",!0),(m(!0),k(y,null,w(l.questionnaires,(e=>(m(),s(q,{key:e.id,class:"questionnaire-item"},{default:o((()=>[v(q,{class:"item-header"},{default:o((()=>[v(d,{class:"item-title"},{default:o((()=>[h(C(e.title),1)])),_:2},1024),v(q,{class:"item-actions"},{default:o((()=>[v(T,{class:"view-btn",onClick:a=>l.viewQuestionnaire(e)},{default:o((()=>[h("查看")])),_:2},1032,["onClick"]),v(T,{class:"delete-btn",onClick:a=>l.deleteQuestionnaire(e.id)},{default:o((()=>[h("取消报名")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),v(q,{class:"tab-bar"},{default:o((()=>[v(q,{class:"tab-item",onClick:l.navigateToDepartment},{default:o((()=>[h("部门展览")])),_:1},8,["onClick"]),v(q,{class:"tab-item active",onClick:l.navigateToPaper},{default:o((()=>[h("已填报")])),_:1},8,["onClick"]),v(q,{class:"tab-item",onClick:l.navigateToInfo},{default:o((()=>[h("个人中心")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-2f62fdfc"]]);export{q as default};

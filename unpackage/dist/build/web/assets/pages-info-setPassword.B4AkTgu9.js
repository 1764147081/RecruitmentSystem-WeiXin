import{_ as s,D as a,x as o,p as e,a3 as l,a as t,c as d,e as r,w as n,H as c,i,d as u,f as w,k as m,C as f,a2 as p}from"./index-C2_1g6db.js";const P=a("authToken");const h=s({data:()=>({oldPassword:"",newPassword:"",confirmPassword:""}),methods:{confirmSetPassword(){this.newPassword?this.newPassword.length<6?o({title:"密码长度不能少于6位",icon:"none"}):this.newPassword===this.confirmPassword?this.updatePassword():o({title:"两次输入的密码不一致",icon:"none"}):o({title:"请输入新密码",icon:"none"})},async updatePassword(){let s;console.log("现在修改个人密码"),s=await e({url:"/user/update/password",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",Authorization:`Bearer ${P}`},data:{oldPassword:this.oldPassword,newPassword:this.newPassword}}),200===s.code&&o({title:"密码修改成功",icon:"success",duration:2e3,success:()=>{setTimeout((()=>{l()}),2e3)}}),400===s.code&&o({title:s.msg,icon:"none",duration:2e3})}}},[["render",function(s,a,o,e,l,P){const h=t(d("u-navbar"),c),_=f,V=p,b=i;return u(),r(b,{class:"password-container"},{default:n((()=>[w(h,{title:"设置密码","left-icon":"arrow-left","auto-back":"","bg-color":"#F8F8F8","title-color":"#000000",border:!1}),w(b,{class:"form-list"},{default:n((()=>[w(b,{class:"form-item"},{default:n((()=>[w(_,{class:"form-label"},{default:n((()=>[m("原密码")])),_:1}),w(V,{class:"form-input",modelValue:l.oldPassword,"onUpdate:modelValue":a[0]||(a[0]=s=>l.oldPassword=s),placeholder:"请输入原密码,若没有设置则空置",password:"true"},null,8,["modelValue"])])),_:1}),w(b,{class:"form-item"},{default:n((()=>[w(_,{class:"form-label"},{default:n((()=>[m("新密码")])),_:1}),w(V,{class:"form-input",modelValue:l.newPassword,"onUpdate:modelValue":a[1]||(a[1]=s=>l.newPassword=s),placeholder:"请输入新密码",password:"true"},null,8,["modelValue"])])),_:1}),w(b,{class:"form-item"},{default:n((()=>[w(_,{class:"form-label"},{default:n((()=>[m("确认密码")])),_:1}),w(V,{class:"form-input",modelValue:l.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=s=>l.confirmPassword=s),placeholder:"请再次输入新密码",password:"true"},null,8,["modelValue"])])),_:1})])),_:1}),w(b,{class:"confirm-btn",onClick:P.confirmSetPassword},{default:n((()=>[w(_,null,{default:n((()=>[m("确认修改")])),_:1})])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-65569cd0"]]);export{h as default};
